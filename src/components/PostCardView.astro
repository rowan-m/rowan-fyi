---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

interface Props {
  post: CollectionEntry<"posts">;
}
const { post } = Astro.props;
---

<style>
  .card {
    width: 100%;
    border: 1px solid var(--sec-border);
    padding: 0.5rem;
    box-sizing: border-box;
  }

  .card:hover {
    border: 1px solid var(--main-accent);
  }

  /* Eugh, not sure why I need this width but it's big enough not to break */
  @media (min-width: 100ch) {
    .card {
      max-width: 36ch;
    }
  }

  .card img {
    width: 100%;
    height: 14rem;
    object-fit: cover;
  }
</style>
<div class="card">
  <a href={"/posts/" + post.id + "/"}>
    <Image src={post.data.image} alt="Preview" width="800" />
  </a>
  <a href={"/posts/" + post.id + "/"}>
    <h3>{post.data.title}</h3>
  </a>
  <span class="pubdate"
    >Published: {
      new Intl.DateTimeFormat("en-GB").format(post.data.pubDate)
    }</span
  >
  <p>{post.data.description}</p>
</div>
