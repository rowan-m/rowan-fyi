<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<title>alert() x-origin iframe</title>
<style>
  iframe {
    width: 100%;
    height: 20rem;
  }
</style>
<h1>alert() x-origin iframe</h1>
<p>Use of <code>window.alert()</code> is deprecated in a cross-origin context such as an <code>iframe</code>.</p>
<h2>Top-level test</h2>
<button type="button" name="alert">window.alert()</button>
<button type="button" name="confirm">window.confirm()</button>
<button type="button" name="prompt">window.prompt()</button>
<h2>Cross-origin test</h2>
<iframe src="https://rowan.fyi/made/x-origin-src/alert/"></iframe>
<script>
  'use strict';
  if (location.protocol !== 'https:' && location.hostname !== 'localhost') {
    location.protocol = 'https:';
  }
  
  const observer = new ReportingObserver((reports, observer) => {
    console.log(reports);
  }, { types: ['deprecation'], buffered: false });
  observer.observe();

  document.querySelector('button[name="alert"]').addEventListener('click', e => window.alert('Top-level alert'));
  document.querySelector('button[name="confirm"]').addEventListener('click', e => window.confirm('Top-level confirm'));
  document.querySelector('button[name="prompt"]').addEventListener('click', e => window.prompt('Top-level prompt'));
</script>