<!doctype html>
<html lang="en">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚â£</text></svg>"
  />
  <link rel="stylesheet" href="./water.css" />
  <title>Anamorphosis</title>
  <style>
    :root {
      --unit: 6.5vmin;
    }

    main {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .staircase {
      position: relative;
      width: calc(7 * var(--unit));
      transform-style: preserve-3d;
      animation: 8s ease 0s infinite alternate rotate-staircase;
    }

    @keyframes rotate-staircase {
      0% {
        transform: rotateX(0deg) rotateY(0deg) rotateZ(0) translateX(0);
      }

      10% {
        transform: rotateX(3.5deg) rotateY(-4.5deg) rotateZ(0) translateX(0);
      }

      100% {
        transform: rotateX(35deg) rotateY(-45deg) rotatez(0deg)
          translateX(calc(-2 * var(--unit)));
      }
    }

    .lower,
    .upper {
      position: relative;
      z-index: -20;
      background: linear-gradient(130deg, #fff, #ddf);
      filter: url(#grain);
      padding-left: calc(2 * var(--unit));
      padding-right: calc(1 * var(--unit));
    }

    .upper {
      padding-top: calc(1 * var(--unit));
    }

    .lower {
      transform-origin: top;
      animation: 8s ease 0s infinite alternate rotate-lower;
      padding-bottom: calc(1 * var(--unit));
    }

    @keyframes rotate-lower {
      0% {
        transform: rotateX(0deg);
        perspective: 0;
      }

      to {
        transform: rotateX(-90deg);
        perspective: -10vmin;
      }
    }

    .wall {
      overflow: hidden;
    }

    .arch,
    .hall {
      background: linear-gradient(90deg, #223, #445);
      width: calc(3 * var(--unit));
    }

    .arch {
      border-top-left-radius: calc(2 * var(--unit));
      border-top-right-radius: calc(2 * var(--unit));
      height: calc(1 * var(--unit));
    }

    .hall {
      position: absolute;
      z-index: -10;
    }

    .upper .hall {
      height: calc(7 * var(--unit));
      top: calc(1.9 * var(--unit));
    }

    .lower .hall {
      height: calc(6 * var(--unit));
    }

    .stair {
      position: relative;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      border-right: calc(0.12 * var(--unit)) solid #111;
      border-bottom: calc(0.12 * var(--unit)) solid #111;
      height: calc(1 * var(--unit));
    }

    .one {
      width: calc(1 * var(--unit));
    }

    .two {
      width: calc(2 * var(--unit));
    }

    .three {
      width: calc(3 * var(--unit));
    }

    .four {
      width: calc(4 * var(--unit));
    }

    .horizontal {
      background: linear-gradient(130deg, #ddd, #ccd);
    }

    .upper .horizontal {
      transform-origin: bottom right;
      transform: skew(45deg);
    }

    .vertical {
      background: linear-gradient(130deg, #aaa, #99a);
    }

    .lower .vertical {
      transform-origin: top right;
      transform: skew(-45deg);
    }

    footer {
      text-align: center;
      font-size: 2vmin;
    }
  </style>
  <main>
    <div class="staircase">
      <div class="upper">
        <div class="wall">
          <div class="arch"></div>
          <div class="hall"></div>
          <div class="horizontal stair face one"></div>
          <div class="vertical stair face one"></div>
          <div class="horizontal stair face two"></div>
          <div class="vertical stair face two"></div>
          <div class="horizontal stair face three"></div>
          <div class="vertical stair face three"></div>
          <div class="horizontal stair face four"></div>
        </div>
      </div>
      <div class="lower">
        <div class="wall">
          <div class="hall"></div>
          <div class="vertical stair face four"></div>
          <div class="horizontal stair face three"></div>
          <div class="vertical stair face three"></div>
          <div class="horizontal stair face two"></div>
          <div class="vertical stair face two"></div>
          <div class="horizontal stair face one"></div>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <p>
      <a href="https://en.wikipedia.org/wiki/Anamorphosis">üß† Anamorphosis</a> |
      <a href="https://glitch.com/edit/#!/anamorphosis?path=index.html"
        >üßë‚Äçüíª Code</a
      >
      |
      <a href="https://mastodon.social/@rowan_m">ü¶£ @rowan_m@mastodon.social</a>
      | <a href="https://twitter.com/rowan_m">ü¶§ @rowan_m@twitter.com</a>
    </p>
  </footer>
  <svg width="0" height="0">
    <filter id="grain" x="0" y="0" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="3.14" />
      <feColorMatrix type="saturate" values="0" />
      <feBlend in="SourceGraphic" mode="multiply" />
    </filter>
  </svg>
  <script>
    "use strict";
    if (location.protocol !== "https:" && location.hostname !== "localhost") {
      location.protocol = "https:";
    }
  </script>
</html>
