<style>
  body {
    font-family: sans-serif;
    max-width: 900px;
    margin: auto;
    background: antiquewhite;
    color: #111;
    font-size: min(1.2rem, 3vmin);
  }
  
  h1 {
    font-size: min(1.2rem, 4vmin);
    font-weight: normal;
    margin: 2vmin;
  }
  
  h2 {
    font-size: min(1.2rem, 4vmin);
    margin: 0 0 2vmin 0;
    padding: 0;
  }
  
  code {
    font-size: min(3rem, 4.5vmin);
  }
  
  .ua {
    padding: 2vmin;
  }
  
  .current {
    background: coral;
  }
  
  .reduced {
    margin-top: 2vmin;
    background: darkseagreen;
  }
  
  .current .segment {
    background: orangered;
  }
  
  .reduced .segment {
    background: seagreen;
  }
  .segment {
    font-weight: bold;
  }
  
  footer {
    margin-top: 2vmin;
    padding: 2vmin;
    background: lightsteelblue;
    font-weight: light;
  }
  
  ul {
    margin: 2vmin;
    padding: 0;
    list-style: none;
  }
  
  .hidden {
    display: none;
  }
</style>
<header>
  <h1>Reduced user-agent in Chrome</h1>
  <div class="not-chrome hidden">
    <h2>Did not detect Chrome</h2>
    <p>This demo only shows how Chrome is reducing its user-agent string. Your browser reports as: <code class="other-ua"></code>.</p>
  </div>
</header>
<main>
  <div class="current ua">
    <h2>Current user-agent</h2>
    <code class="string">Mozilla/5.0 (<span class="segment platform">‚Ä¶</span>) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/<span class="segment major">‚Ä¶</span>.<span class="segment minor">‚Ä¶</span> <span class="segment mobile"></span> Safari/537.36</code>
  </div>
  <div class="reduced ua">
    <h2>Fully reduced user-agent</h2>
    <code class="string">Mozilla/5.0 (<span class="segment platform">‚Ä¶</span>) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/<span class="segment major">‚Ä¶</span>.<span class="segment minor">‚Ä¶</span> <span class="segment mobile"></span> Safari/537.36</code>
  </div>
</main>
<footer>
  <ul>
<li>ü§è Minor version reduced from Chrome 101.</li>
<li>üíª Desktop platform reduced from Chrome 107.</li>
<li>üì± Mobile platform and device reduced from Chrome 110.</li>
<li>üìñ Learn more about <a href="https://developer.chrome.com/docs/privacy-sandbox/user-agent/">Chrome's user-agent reduction</a>.</li>
<li>üßë‚Äçüíª <a href="https://glitch.com/edit/#!/reduced-ua?path=public%2Fpartial%2Freduced.html">Code</a> from üê¶ <a href="https://twitter.com/rowan_m">@rowan_m</a></li>
  </ul>
</footer>
<script>
  'use strict';
  if (location.protocol !== 'https:' && location.hostname !== 'localhost') {
    location.protocol = 'https:';
  }
  
  const chromeUAs = /^Mozilla\/5\.0 \((?<fullplatform>(?<platform>Lin|Win|Mac|X11; C|X11; L)+[^\)]+)\) AppleWebKit\/537.36 \(KHTML, like Gecko\) Chrome\/(?<major>\d+)\.(?<minor>[\d\.]+)\s*(?<mobile>[Mobile]*)\s*Safari\/537\.36$/;
  const matched = chromeUAs.exec(navigator.userAgent);

  if (matched) {
    // Map detected platform to reduced value
    const unifiedPlatform = {
      'Lin': 'Linux; Android 10; K',
      'Win': 'Windows NT 10.0; Win64; x64',
      'Mac': 'Macintosh; Intel Mac OS X 10_15_7',
      'X11; C': 'X11; CrOS x86_64 14541.0.0',
      'X11; L': 'X11; Linux x86_64',
    };
    
    document.querySelector('.current>.string>.platform').textContent = matched.groups.fullplatform;
    document.querySelector('.current>.string>.major').textContent = matched.groups.major;
    document.querySelector('.current>.string>.minor').textContent = matched.groups.minor;
    document.querySelector('.current>.string>.mobile').textContent = matched.groups.mobile;
    
    document.querySelector('.reduced>.string>.platform').textContent = unifiedPlatform[matched.groups.platform];
    document.querySelector('.reduced>.string>.major').textContent = matched.groups.major;
    document.querySelector('.reduced>.string>.minor').textContent = '0.0.0';
    document.querySelector('.reduced>.string>.mobile').textContent = matched.groups.mobile;
   } else {
    document.querySelector('.other-ua').textContent = navigator.userAgent;
    document.querySelector('.not-chrome').classList.remove('hidden');
    document.querySelector('main').classList.add('hidden');
   }
</script>