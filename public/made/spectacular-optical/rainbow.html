<!DOCTYPE html>
<html lang="en">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rainbow 🌈 Müller-Lyer ↕↕ optical illusion</title>

  <meta
    name="Description"
    content="Inspired by tweets from @Chris_Said and @gsarcone here's an SVG version of the Müller-Lyer illusion. None of the grey lines are moving, they all remain the same length!"
  />
  <meta name="theme-color" content="slategray" />
  <link
    rel="shortcut icon"
    href="./assets/eyecon.png"
  />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@rowan_m" />
  <meta name="twitter:title" content="Rainbow 🌈 Müller-Lyer ↕↕ optical illusion" />
  <meta
    name="twitter:description"
    content="Inspired by tweets from @Chris_Said and @gsarcone here's an SVG version of the Müller-Lyer illusion. None of the grey lines are moving, they all remain the same length!"
  />

  <meta property="og:url" content="https://spectacular-optical.glitch.me/rainbow.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Rainbow 🌈 Müller-Lyer ↕↕ optical illusion" />
  <meta
    property="og:description"
    content="Inspired by tweets from @Chris_Said and @gsarcone here's an SVG version of the Müller-Lyer illusion. None of the grey lines are moving, they all remain the same length!"
  />

  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    p {
      max-width: 80vw;
    }
    .columns {
      contain: layout style;
      margin: 0;
      padding: 0;
      display: flex;
      flex-flow: row nowrap;
      justify-content: center;
      align-items: center;
    }
    svg {
      will-change: transform;
      contain: layout style paint;
      display: block;
      width: 2.5vw;
      padding: 0;
      margin: 0;
      margin-left: 0.2vw;
    }
    path {
      stroke-width: 4.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    .arrows {
      stroke: url(#rainbow-effect);
    }
  </style>
  <p>
    Inspired by tweets from
    <a href="https://twitter.com/Chris_Said/status/1213217943414136833"
      >🐦 @Chris_Said</a
    >
    and <a href="https://twitter.com/gsarcone">🐦 @gsarcone</a> here's an SVG
    version of the
    <a href="https://www.giannisarcone.com/Muller_lyer_illusion.html"
      >Müller-Lyer ↕↕ illusion</a
    >. <b>None of the grey lines are changing length</b>, they all remain the
    same size! Give me a shout at
    <a href="https://twitter.com/rowan_m">🐦 @rowan_m</a> with any comments,
    feel free to remix and modify with that little fish button over there 🎏↗️
    <br /><a href="./">[Science 🔬 version]</a>
  </p>
  <div class="columns"></div>
  <svg
    viewBox="-2 -2 24 464"
    preserveAspectRatio="none"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
  >
    <defs>
      <linearGradient
        id="rainbow-effect"
        x1="0%"
        y1="0%"
        x2="100%"
        y2="100%"
        spreadMethod="reflect"
      >
        <stop offset="0%" stop-color="red">
          <animate
            attributeName="stop-color"
            values="red;orange;yellow;green;blue;indigo;violet;red"
            dur="6s"
            repeatCount="indefinite"
          />
        </stop>
        <stop offset="17%" stop-color="orange">
          <animate
            attributeName="stop-color"
            values="orange;yellow;green;blue;indigo;violet;red;orange"
            dur="6s"
            repeatCount="indefinite"
          />
        </stop>
        <stop offset="34%" stop-color="yellow">
          <animate
            attributeName="stop-color"
            values="yellow;green;blue;indigo;violet;red;orange;yellow"
            dur="6s"
            repeatCount="indefinite"
          />
        </stop>
        <stop offset="51%" stop-color="green">
          <animate
            attributeName="stop-color"
            values="green;blue;indigo;violet;red;orange;yellow;green"
            dur="6s"
            repeatCount="indefinite"
          />
        </stop>
        <stop offset="68%" stop-color="blue">
          <animate
            attributeName="stop-color"
            values="blue;indigo;violet;red;orange;yellow;green;blue"
            dur="6s"
            repeatCount="indefinite"
          />
        </stop>
        <stop offset="85%" stop-color="indigo">
          <animate
            attributeName="stop-color"
            values="indigo;violet;red;orange;yellow;green;blue;indigo"
            dur="6s"
            repeatCount="indefinite"
          />
        </stop>
        <stop offset="100%" stop-color="violet">
          <animate
            attributeName="stop-color"
            values="violet;red;orange;yellow;green;blue;indigo;violet"
            dur="3s"
            repeatCount="indefinite"
          />
        </stop>
      </linearGradient>
    </defs>
  </svg>
  <template id="column">
    <svg
      viewBox="-2 -2 24 464"
      preserveAspectRatio="none"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        class="a-line"
        d="M 10  30 l 0.1 80
           M 10 190 l 0.1 80
           M 10 350 l 0.1 80"
        fill="none"
        stroke="lightgray"
      />
      <path
        class="b-line"
        d="M 10 110 l 0.1 80
           M 10 270 l 0.1 80"
        fill="none"
        stroke="slategray"
      />
      <path
        class="arrows"
        d="M 0  60 l 10 -30 l 10  30
           M 0  80 l 10  30 l 10 -30
           M 0 220 l 10 -30 l 10  30
           M 0 240 l 10  30 l 10 -30
           M 0 380 l 10 -30 l 10  30
           M 0 400 l 10  30 l 10 -30"
        fill="none"
      >
        <animate
          attributeName="d"
          dur="3s"
          repeatCount="indefinite"
          values="M 0  60 l 10 -30 l 10  30
                  M 0  80 l 10  30 l 10 -30
                  M 0 220 l 10 -30 l 10  30
                  M 0 240 l 10  30 l 10 -30
                  M 0 380 l 10 -30 l 10  30
                  M 0 400 l 10  30 l 10 -30;

                  M 0   0 l 10  30 l 10 -30
                  M 0 140 l 10 -30 l 10  30
                  M 0 160 l 10  30 l 10 -30
                  M 0 300 l 10 -30 l 10  30
                  M 0 320 l 10  30 l 10 -30
                  M 0 460 l 10 -30 l 10  30;

                  M 0  60 l 10 -30 l 10  30
                  M 0  80 l 10  30 l 10 -30
                  M 0 220 l 10 -30 l 10  30
                  M 0 240 l 10  30 l 10 -30
                  M 0 380 l 10 -30 l 10  30
                  M 0 400 l 10  30 l 10 -30"
          calcMode="spline"
          keyTimes="0.0;
                    0.5;
                    1.0"
          keySplines="0.3 0 0.7 1;
                      0.3 0 0.7 1"
        />
      </path>
    </svg>
  </template>
  <div
    class="glitchButton"
    style="position: absolute; top: 2px; right: 2px;"
  ></div>
  <script src="https://button.glitch.me/button.js"></script>
  <script>
    const columnTpl = document.querySelector("#column");
    const columnsContainer = document.querySelector(".columns");
    let delay = 0;

    while (delay < 3) {
      const column = document.importNode(columnTpl.content, true);
      const animate = column.querySelector("animate");
      animate.setAttribute("begin", delay + "s");
      delay += 0.1;
      columnsContainer.appendChild(column);
    }
  </script>
</html>
